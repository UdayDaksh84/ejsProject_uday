<%- include('./base/header.ejs')%>
<%- include('./base/nav.ejs')%>
<div class="container">
  <div class="alert text-center bg-primary my-3" style="color: white">
    <h4>Add student</h4>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col"></div>
    <div class="col">
      <form action="/add/student" method="post" enctype="multipart/form-data">
        <div>
          <label class="form-label">Roll No</label>
          <input type= "text" class="form-control" name="rollNo"></input>
        </div>
        <div>
          <label class="form-label">Student Name</label>
          <input type= "text" class="form-control" name="studentName"></input>
        </div>
        <div>
          <label class="form-label">father Nmae</label>
          <input type= "text" class="form-control" name="fatherName"></input>
        </div>

          <div>
            <label class="form-label">Course</label>
            <select class="form-control" id="course" name="course">
              <option value="" disabled selected>-- Select a Course --</option>
              <option value="btech">BTech</option>
              <option value="bsc">BSC</option>
              <option value="bca">BCA</option>
              <option value="bba">BBA</option>
            </select>
          </div>
          <div class="mt-3" id="branchDiv" style="display: none;">
              <label class="form-label">Branch</label>
                <select class="form-control" name="branch" id="branch">
                <option value="" disabled selected>--Select a Branch</option>
                </select>
          </div>


        <div>
          <label class="form-label">Year Of Addmission</label>
          <input type= "text" class="form-control" name="yearOfAdmission"></input>
        </div>
        <div>
          <label class="form-label">Select Student Image</label>
          <input type= "file" class="form-control" name="studentImage"></input>
        </div>
        <input type="submit" value="Add Student" class="btn btn-warning w-100 my-3"></input>
      </form>
    </div>
    <div class="col"></div>
  </div>
</div>

<script>
  // Branch options data
  const branchOptions = {
    btech: ["IT", "IoT", "AI & ML", "CS"],
    bsc: ["Physics", "Math", "Chemistry"]
  };

  const courseSelect = document.getElementById("course");
  const branchSelect = document.getElementById("branch");
  const branchDiv = document.getElementById("branchDiv");

  // Hide branch by default
  branchDiv.style.display = "none";

  courseSelect.addEventListener("change", function () {
    const selectedCourse = this.value;

    // Clear old options
    branchSelect.innerHTML = '<option value="" disabled selected>-- Select a Branch --</option>';

    // Show branch only for B.Tech and B.Sc
    if (branchOptions[selectedCourse]) {
      branchDiv.style.display = "block"; // show branch dropdown

      // Add branch options dynamically
      branchOptions[selectedCourse].forEach(branch => {
        const option = document.createElement("option");
        option.value = branch.toLowerCase();  // backend value
        option.textContent = branch;          // visible text
        branchSelect.appendChild(option);
      });
    } else {
      branchDiv.style.display = "none"; // hide branch if not B.Tech/B.Sc
    }
  });
</script>
    <%-include('./base/footer.ejs')%>
